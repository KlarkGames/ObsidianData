#ЭВМ 

**Прямой доступ в память** (Direct Memory Access) - режим обмена данными между внешним устройством и [[Оперативная память|оперативной памяти]] **без участия процессора**. Применяется при обмене большими блоками и пересылки данных по соседним адресам.

![[Pasted image 20230112145525.png]]

Управлением занимается [[Контроллер]]. Он запрашивает у процессора управление шиной данных, отправляя сигнал **HOLD**. [[Процессор]] заканчивает свою программу и отправляет сигнал **HLDA** (Hold Acknowledge) и отключается от шины, управление переходит контроллеру. После завершения работы контроллер снимает сигнал **HOLD**.

### Схема подключения контроллера ПДП к Процессору
![[Pasted image 20230112162218.png]]
### Работа контроллера ПДП в составе микропроцессорной системы
![[Pasted image 20230112162350.png]]

### Структурная схема контроллера ПДП
![[Pasted image 20230112163219.png]]
Контроллер состоит из:
- **Каналов прямого доступа** CH0 - CH3. Могут обладать приоритетом.
- **Двунаправленного буфера данных** BD.
- **Схемы управления чтением/записью** RWCU (Read Write Control Unit). Адресует регистры контроллера и управляет обменом по шине данных.
- **Блока управления** CU (Control Unit). Содержит регистры режима и состояния контроллера. Обеспечивает последовательность операций. Программируется процессором.
- **Блока управления приоритетами** PCU (Priority Control Unit). Обеспечивает порядок обслуживания запросов.

Назначения сигналов:
- **D** - обмен данными
- **I/OR** (Input/Output Read) - Чтение из устройства ввода-вывода.
	- Если I/OR = 0 и используется как вход, то происходит чтение из контроллера в микропроцессор.
	- Если I/OR = 0 и используется как выход, то происходит чтение из внешнего устройства.
- **I/OW** (Input/Output Write) - Запись в устройство ввода-вывода
	- Если I/OW = 0 и используется как вход, то разрешено программирование контроллера.
	- Если I/OW = 0 и используется как выход, то производится запись во внешнее устройство
- **CLK** - Вход тактовых импульсов.
- **RESET** - Сброс всех настроек контроллера
- **CS** (Chip Select) - Выбор контроллера ПДП.
- **A1** - Адресные выводы для адресации устройств контроллера
- **A2** - Адресные выводы для адресации контроллером [[Оперативная память|оперативной памяти]]
- **HOLD** - Запрос на управление шиной данных
- **HLDA** - Разрешение управления шиной данных
- **MEMR** - Сигнал чтения из памяти
- **MEMW** - Сигнал записи в память
- **TC** - Сигнал счета. Информирует о последнем цикле передачи блока данных
- **DRQ** - Запросы ПДП к памяти каналов.
- **DACK** - Подтверждение запроса прямого доступа 
